<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact | Musfiqur Rahman</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Optional: simple inline success/error styling */
    .form-status {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #e5e5e5;
      background: #fafafa;
      font-weight: 700;
      display: none;
    }
    .form-status.success { color: #2e7d32; border-color: #cfe9d5; background: #f2fbf4; }
    .form-status.error { color: #b00020; border-color: #f3c2c7; background: #fff5f6; }
    .btn[disabled] { opacity: 0.7; cursor: not-allowed; }
  </style>
</head>

<body>

<header>
  <nav>
    <a href="index.html">Home</a>
    <a href="research.html">Research</a>
    <a href="publications.html">Publications</a>
    <a href="projects.html">Projects</a>
    <a href="membership.html">Membership</a>
    <a href="certifications.html">Certifications</a>
    <a href="album.html">My Album</a>
    <a class="active" href="contact.html">Contact</a>
  </nav>
</header>

<h1>Contact</h1>

<p>
  For research collaboration, academic supervision, professional opportunities aligned with my research interests,
  speaking invitations, or general inquiries, please feel free to contact me using the form below.
</p>

<div class="contact-grid">

  <!-- LEFT COLUMN: INFO + MAP -->
  <div class="contact-info">

    <p><strong>Email:</strong>
      <a href="mailto:mrahma05@villanova.edu">mrahma05@villanova.edu</a>
    </p>

    <p><strong>Affiliation:</strong> Villanova University</p>

    <p><strong>Research Group:</strong> Villanova Center for Resilient Water Systems (VCRWS)</p>

    <p><strong>Department:</strong> Civil &amp; Environmental Engineering</p>

    <p><strong>Google Scholar:</strong>
      <a href="https://scholar.google.com/citations?user=AbCdEfG" target="_blank" rel="noopener">
        View Profile
      </a>
    </p>

    <p><strong>LinkedIn:</strong>
      <a href="https://www.linkedin.com/in/musfiqur-rahman" target="_blank" rel="noopener">
        View Profile
      </a>
    </p>

    <p><strong>Location:</strong> Villanova University, Pennsylvania, USA</p>

    <h2 style="margin-top:24px;">Location — Villanova University</h2>

    <div class="contact-map">
      <iframe
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        src="https://www.google.com/maps?q=Villanova%20University%2C%20Pennsylvania&output=embed">
      </iframe>
    </div>

  </div>

  <!-- RIGHT COLUMN: FORM CARD -->
  <div class="contact-card">

    <h2>Contact Form</h2>

    <!-- ✅ No page navigation: handled by JS -->
    <form id="contactForm">

      <!-- Honeypot spam trap -->
      <input type="text" name="_gotcha" style="display:none">

      <label for="name"><strong>Your Name</strong></label>
      <input type="text" id="name" name="name" placeholder="Enter your name" required>

      <label for="email"><strong>Your Email</strong></label>
      <input type="email" id="email" name="email" placeholder="Enter your email" required>

      <label for="message"><strong>Your Message</strong></label>
      <textarea id="message" name="message" rows="6" placeholder="Write your message" required></textarea>

      <button id="submitBtn" type="submit" class="btn">Send Message</button>

      <div id="formStatus" class="form-status"></div>
    </form>

  </div>

</div>

<div class="footer">© Musfiqur Rahman</div>

<script>
  const form = document.getElementById("contactForm");
  const statusBox = document.getElementById("formStatus");
  const submitBtn = document.getElementById("submitBtn");

  form.addEventListener("submit", async (e) => {
    e.preventDefault(); // ✅ stop leaving the page

    statusBox.style.display = "none";
    statusBox.className = "form-status";
    submitBtn.disabled = true;
    submitBtn.textContent = "Sending...";

    try {
      const formData = new FormData(form);

      // ✅ Post to Formspree via AJAX
      const response = await fetch("https://formspree.io/f/maqnzprb", {
        method: "POST",
        body: formData,
        headers: { "Accept": "application/json" }
      });

      if (response.ok) {
        // ✅ Show success + clear form
        statusBox.textContent = "Thank you! Your message has been sent successfully.";
        statusBox.classList.add("success");
        statusBox.style.display = "block";
        form.reset();
      } else {
        // Try to show useful error from Formspree
        let data = {};
        try { data = await response.json(); } catch (_) {}
        statusBox.textContent = data?.error || "Sorry—something went wrong. Please try again or email me directly.";
        statusBox.classList.add("error");
        statusBox.style.display = "block";
      }
    } catch (err) {
      statusBox.textContent = "Network error. Please try again or email me directly.";
      statusBox.classList.add("error");
      statusBox.style.display = "block";
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = "Send Message";
    }
  });
</script>

</body>
</html>
